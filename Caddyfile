{
    # Debug rejimini o'chiramiz (production uchun)
    debug false
    # Emailni kiritamiz (Let's Encrypt uchun zarur)
    email abduraimovabdurahmon@gmail.com  # Iltimos, o'z emailingizni yozing
}

# HTTPS bilan serverchi.hihi.uz domaeni uchun
serverchi.hihi.uz {
    # Statik fayllarni xizmat qilish
    root * /srv
    file_server

    # 404 xatolar uchun maxsus sahifa
    handle_errors {
        @404 {
            expression {http.error.status_code} == 404
        }
        rewrite @404 /404.html
        file_server
    }

    # Loglarni yoqish
    log {
        output file /var/log/caddy/access.log
    }

    # HTTP dan HTTPS ga yo'naltirish
    @http {
        protocol http
    }
    redir @http https://{host}{uri} permanent
}

# HTTP (80-port) uchun asosiy blok - HTTPS ga yo'naltiramiz
:80 {
    redir https://serverchi.hihi.uz{uri} permanent
}